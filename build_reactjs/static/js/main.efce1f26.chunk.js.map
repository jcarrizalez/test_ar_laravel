{"version":3,"sources":["components/User.js","services.js","components/Search.js","components/Books.js","components/BookTitle.js","components/Content.js","components/BookReader.js","Router.js","index.js"],"names":["User","title","href","target","rel","src","alt","loading","api_url","process","redux","reduxjs","Link","RouterLink","get","url","a","params","push","data","axios","response","error","request","message","code","console","Search","value","onChance","children","paginate","total","total_pages","page","className","type","name","id","placeholder","defaultValue","onChange","default_state","book","text","timer","elements","count","state","Item","item","slug","to","getDatauseCallback","callback","replace","metadata","concat","Date","Books","useState","update","setUpdate","useEffect","clearTimeout","scroll","document","getElementById","handleScroll","event","offsetHeight","scrollTop","scrollHeight","addEventListener","removeEventListener","setTimeout","map","key","BookTitle","onClick","setBook","unsubscribe","subscribe","is","text_content","content","String","substring","length","toUpperCase","BookContent","search","web_url","current","expand","zoom","books","BookReader","match","query","location","refScroll","useRef","onExpand","ctrl","div","_class","querySelector","classList","onHide","onZoom","onHref","includes","querySelectorAll","forEach","row","remove","add","_url","indexOf","onScroll","window","scrollY","innerHeight","log","NavLink","icon","is_id","is_zoom","onCurrent","ref","width","Switch","Content","Layout","props","URLSearchParams","useLocation","path","render","prop","Router","history","createBrowserHistory","store","loader","from","exact","require","ReactDOM","StrictMode"],"mappings":"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","file":"static/js/main.efce1f26.chunk.js","sourcesContent":["import React from \"react\";\n\nconst User = () =>\n\t<a title=\"Mi Linkedin\" href=\"https://www.linkedin.com/in/juan-manuel-carrizalez-martinez-a71320151/\" target=\"_blank\" rel=\"noreferrer\" >\n\t\t<img src=\"https://lh3.googleusercontent.com/ogw/ADea4I67xIQeX_J_E6zDV36Y8jDeFMpg0-lvd2j8saGqTw=s83-c-mo\" alt=\"\" loading=\"lazy\" />\n\t</a>;\n\nexport default User;","import axios from 'axios';\nimport reduxjs from 'redux-js';\nimport { Link as RouterLink } from \"react-router-dom\";\n\nexport const api_url = process.env.REACT_APP_API_URL;\n\nexport const redux = reduxjs;\n\nexport const Link = RouterLink;\n\nexport async function get(url, params={}){\n\n  //loader es para habilitar el component loader\n  redux.push('loader', true);\n  let data = null;\n  try {\n    const response = await axios.get(api_url+url, { params });\n    data = response.data.data??null;\n  }\n  catch (ex) {\n     let error = null;\n      if (ex.request) {\n        error = {message:'Error en Conexión', code:'404'};\n      }\n    else {\n        error = {message:ex.message, code:'500'};\n    }\n    redux.push('errors', [error]);\n    console.error(error);\n  }\n  redux.push('loader', false);\n  return data;\n}","import React from \"react\";\n\nconst Search = ({value, onChance, children, paginate:{total, total_pages, page }}) =>\n\t<div className=\"search\">\n\t\t<input type=\"text\" name=\"\" id=\"\"  placeholder=\"Indique una busqueda\" \n\t\tdefaultValue={value} onChange={onChance}/>\n\t\t<div id=\"search-paginate\">\n\t\t\t<p><b>registros:</b> {total} </p>\n\t\t\t<p><b>pagina:</b> {total_pages?page:''} </p>\n\t\t\t<p><b>paginas:</b> {total_pages} </p>\n\t\t</div>\n\t\t{children}\n    </div>;\n\nexport default Search;","import React, {useEffect, useState } from \"react\";\nimport {Link, get} from '../services';\n\nimport Search from './Search';\n\n/**\n* no uso el Hooks useCallback, porque incrementa el uso de memoria\n* en el acceso desde useEffect, aunque no es la manera en react, asi da mas performance\n* y escribo menos codigo, que es un beneficio para el build\n*/\nconst default_state = {\n\turl:'/books?page={{page}}&count={{count}}',\n\tbook:null,\n\ttext:'',\n\ttimer:0,\n\telements:[],\n\tpaginate:{\n\t  count: 20, \n\t  page: 1\n\t}\n};\nvar state = default_state;\n\nconst Books = ({book}) => {\n\n\tconst [update, setUpdate] = useState(null);\n\n\tconst {text, paginate, elements } = state;\n\n\tconst onChance = ({target:{value}}) => {\n\n\t\t//ctrl de tiempo entre las busquedas\n\t\tclearTimeout(state.timer);\n\n\t\tstate = {\n\t\t\t...default_state,\n\t\t\tbook:book,\n\t\t\ttext:value,\n\t\t\t//ctrl de tiempo entre las busquedas\n\t\t\ttimer:setTimeout(() => {\n\t\t\t\tgetDatauseCallback(setUpdate);\n\t\t\t} , 500)\n\t\t};\n\t};\n\n\t/**\n\t* ctrl de tiempo entre las busquedas, esto cuando desmonta el componente\n\t* si quedo un setTimeout, esto lo eliimina y evita el uso de memoria\n\t*/\n\tuseEffect(() => {\n\t\tgetDatauseCallback(setUpdate);\n\t\treturn () => clearTimeout(state.timer);\n\t}, []);\n\n\t//Listener del scroll busqueda esto se debe pasar a un componente separado, es comun con otros\n\tuseEffect(() => {\n\n\t\tvar scroll = document.getElementById('search-elements');\n\t\t\n\t    function handleScroll(event) {\n\n\t\t  if (scroll.offsetHeight + scroll.scrollTop >= scroll.scrollHeight) {\t      \t\n\t      \tgetDatauseCallback(setUpdate);\n\t\t  }\n\t    }\n\n\t    scroll.addEventListener('scroll', handleScroll);\n\n\t    return () => scroll.removeEventListener('scroll', handleScroll);\n\n\t}, [update]);\n\n\treturn(\n\t\t<Search value={text} paginate={paginate} onChance={onChance}>\n\t\t\t<div id=\"search-elements\">\n\t\t\t\t{elements.map((item,key) =>{\n\t\t\t\t\treturn <Item key={key} text={text} item={item}/>\n\t\t\t\t})}\n        \t</div>\n        </Search>\n\t);\n}\n\nconst Item = ({text, item:{slug, name}}) =>{\n\treturn(\n\t\t<div className=\"card item\">\n\t\t  <div className=\"card-body\">\n\t\t\t<Link to={`/reader/${slug}?location=1`}>\n\t\t\t    <h5 className=\"card-title\"><b>{name}</b></h5>\n\t\t\t</Link>\n\t\t  </div>\n\t\t</div>\n\t);\n}\n\n/**\n* NOT Hooks useCallback, asi da mas performance en memoria\n*/\nasync function getDatauseCallback(callback){\n\tlet {\n\t\ttext,\n\t\turl,\n\t\telements,\n\t\tpaginate:{\n\t\t\tpage, \n\t\t\tcount,\n\t\t\ttotal_pages\n\t\t}\n\t} = state;\n\n  \tif(total_pages === page) return null;\n  \t\n  \t//replace url con datos actuales\n  \turl = url\n  \t\t.replace('{{page}}', total_pages? (page+1) : page)\n  \t\t.replace('{{count}}', count)\n  \t\t+((text !== '')? `&search=${text}`:'');\n\t\n\tlet response = await get(url);\n\tif(response){\n\n\t\tstate = {\n\t\t\t...state,\n\t\t\tpaginate: response.metadata,\n\t\t\telements: elements.concat(response.elements),\n\t\t};\n\t}\n\tcallback(new Date());\n}\n\nexport default Books;","import React, {useEffect, useState } from \"react\";\nimport {redux} from '../services';\nexport default function BookTitle({onClick}){\n\n\tconst [book, setBook] = useState(redux.get('book'));\n\n\tdocument.title = book.name;\n\n\tuseEffect(() => {\n\n\t    const unsubscribe = redux.subscribe( () => {\n\t      if(redux.is('book')) {\n\t        setBook(redux.get('book'));\n\t      }\n\t    });\n\t    return () => unsubscribe();\n  \t});\n\n\treturn (\n\t\t<div id=\"logo\" className=\"nav_logo\" onClick={onClick}>\n\t\t  <i className=\"bx bx-layer nav_logo-icon\"></i>\n\t\t  <span className=\"nav_logo-name \">{book.name}</span>\n\t\t</div>\n\t);\n}","import React, {useEffect, useState } from \"react\";\nimport {Link, get, redux} from '../services';\n\nimport Search from './Search';\n\n/**\n* no uso el Hooks useCallback, porque incrementa el uso de memoria\n* en el acceso desde useEffect, aunque no es la manera en react, asi da mas performance\n* y escribo menos codigo, que es un beneficio para el build\n*/\nconst default_state = {\n\turl:'/books/{{book}}/content?page={{page}}&count={{count}}',\n\tbook:null,\n\ttext:null,\n\ttimer:0,\n\telements:[],\n\tpaginate:{\n\t  count: 20, \n\t  page: 1\n\t}\n};\nvar state = default_state;\n\nconst BookContent = ({book}) => {\n\n\tconst [update, setUpdate] = useState(null);\n\n\tconst {text, paginate, elements } = state;\n\n\tconst onChance = ({target:{value}}) => {\n\n\t\t//ctrl de tiempo entre las busquedas\n\t\tclearTimeout(state.timer);\n\n\t\tstate = {\n\t\t\t...default_state,\n\t\t\tbook:book,\n\t\t\ttext:value,\n\t\t\t//ctrl de tiempo entre las busquedas\n\t\t\ttimer:setTimeout(() => {\n\t\t\t\tgetDatauseCallback(setUpdate);\n\t\t\t} , 500)\n\t\t};\n\t};\n\n\t//load ultima busqueda\n\tuseEffect(() => {\n\t\t\n\t\tlet search = redux.get('search');\n\t\t\n\t\tif(search.elements){\n\t\t\tstate = {\n\t\t\t\t...default_state,\n\t\t\t\t...search\n\t\t\t}\n\t\t\tsetUpdate(new Date());\n\t\t}\n\n\t}, []);\n\n\t/**\n\t* ctrl de tiempo entre las busquedas, esto cuando desmonta el componente\n\t* si quedo un setTimeout, esto lo eliimina y evita el uso de memoria\n\t*/\n\tuseEffect(() => {\n\t\treturn () => clearTimeout(state.timer);\n\t}, []);\n\n\t//Listener del scroll busqueda\n\tuseEffect(() => {\n\n\t\tvar scroll = document.getElementById('search-elements');\n\t\t\n\t    function handleScroll(event) {\n\n\t\t  if (scroll.offsetHeight + scroll.scrollTop >= scroll.scrollHeight) {\t      \t\n\t      \tgetDatauseCallback(setUpdate);\n\t\t  }\n\t    }\n\n\t    scroll.addEventListener('scroll', handleScroll);\n\n\t    return () => scroll.removeEventListener('scroll', handleScroll);\n\n\t}, [update]);\n\n\treturn(\n\t\t<Search value={text} paginate={paginate} onChance={onChance}>\n\t\t\t<div id=\"search-elements\">\n\t\t\t\t{elements.map((item,key) =>{\n\t\t\t\t\treturn <Item key={key} text={text} item={item}/>\n\t\t\t\t})}\n        \t</div>\n        </Search>\n\t);\n}\n\nconst Item = ({text, item:{page, text_content}}) =>{\n\tlet content = (text_content === null)?'':String(text_content);\n\tcontent = content.substring(0,200)+(content.length>200?'...':'');\n\tif(text!==''){\n\t\tcontent = content.replace(text,'{{'+text.toUpperCase()+'}}');\n\t}\n\treturn(\n\t\t<div className=\"card item\">\n\t\t  <div className=\"card-body\">\n\t\t\t<Link to={`/reader/eloquent-javascript?location=${page}`}>\n\t\t\t    <h5 className=\"card-title\"><b>PÁGINA</b> {page}</h5>\n\t\t\t    <p className=\"card-text\">{content}</p>\n\t\t\t</Link>\n\t\t  </div>\n\t\t</div>\n\t);\n}\n\n/**\n* NOT Hooks useCallback, asi da mas performance en memoria\n*/\nasync function getDatauseCallback(callback){\n\tlet {\n\t\ttext,\n\t\tbook,\n\t\turl,\n\t\telements,\n\t\tpaginate:{\n\t\t\tpage, \n\t\t\tcount,\n\t\t\ttotal_pages\n\t\t}\n\t} = state;\n\n\tif(text === null) return null;\n\n  \tif(total_pages === page) return null;\n  \t\n  \t//replace url con datos actuales\n  \turl = url\n  \t\t.replace('{{book}}', book)\n  \t\t.replace('{{page}}', total_pages? (page+1) : page)\n  \t\t.replace('{{count}}', count)\n  \t\t+((text !== '')? `&search=${text}`:'');\n\t\n\tlet response = await get(url);\n\tif(response){\n\n\t\tstate = {\n\t\t\t...state,\n\t\t\tpaginate: response.metadata,\n\t\t\telements: elements.concat(response.elements),\n\t\t};\n\t\tredux.push('search',state);\n\t}\n\tcallback(new Date());\n}\n\nexport default BookContent;","import React, {useEffect, useState, useRef } from \"react\";\nimport User from './User';\nimport Books from './Books';\nimport Title from './BookTitle';\nimport Content from './Content';\nimport {api_url} from '../services';\n\n/**\n* no uso el Hooks useCallback, porque incrementa el uso de memoria\n* en el acceso desde useEffect, aunque no es la manera en react, asi da mas performance\n* y escribo menos codigo, que es un beneficio para el build\n*/\nconst default_state = {\n  api_url:`${api_url}/books/{{book}}?page={{page}}`,\n  web_url:null,\n  current:null,\n  expand:false,\n  zoom:70,\n  book:null,\n  books:[],\n};\nvar state = default_state;\n\n\nexport default function BookReader({match:{url, params}, query}) {\n\n  state.book = params.book;\n  state.web_url = url;\n  \n  const location = query.get(\"location\")||1;\n\n  const refScroll = useRef();\n\n  const [update, setUpdate] = useState(null);\n\n  const {expand, zoom, current, book, books } = state;\n\n  const onExpand = () => {\n    \n    const ctrl = (div, _class) =>\n      document.querySelector(div).classList.[expand?'remove':'add'](_class);\n\n    //control de css\n    ctrl('#nav-bar', 'show');\n    ctrl('#header-toggle', 'bx-x');\n    ctrl('#body-pd', 'body-pd');\n    ctrl('#header', 'body-pd');\n\n    if(expand === true){\n      state.current = null;\n    }\n    state.expand = !expand;\n    setUpdate(new Date());\n  }\n  const onHide = value => (expand === value)? onExpand() : null;\n\n  const onCurrent = current => {\n\n    state.update = update;\n    state.current = current;\n    setUpdate(new Date());\n  }\n\n  const onZoom = id => {\n\n    if('zoom-in'===id && zoom<200){\n      state.zoom += 10;\n    }\n    else if(zoom>0){\n      state.zoom -= 10;\n    }\n    setUpdate(new Date());\n  }\n\n  const onHref = id => {\n    \n    if(!['zoom-in','zoom-out'].includes(id)){\n      onHide(false);\n    }\n    state.current = id;\n    setUpdate(new Date());\n\n    document.querySelectorAll('.nav_link')\n      .forEach(row=> row.classList.remove('active') );\n\n    document.querySelector('#'+id).classList.add('active');\n  }\n\n  //busco la data cada vez que que cambia el router en location\n  useEffect(() => {\n    getDatauseCallback(setUpdate, location);\n  }, [location]);\n\n  \n  useEffect(() => {\n\n    function onScroll(event){\n\n      const { offsetHeight } = refScroll.current;\n      const { scrollY, innerHeight } = window;\n\n      if ((scrollY + innerHeight) >= offsetHeight){\n\n        /**\n        * aca debo ejectuar un link-route a la siguiente pagina\n        * dejo para luego ya que debo analizarlo bien\n        */\n        //let book = state.books.pop();\n        //getDatauseCallback(setUpdate, (book.page+1));\n        console.log('scroll dejo para despues')\n      }\n    }\n\n    window.addEventListener(\"scroll\", onScroll);\n\n    return () => {\n      window.removeEventListener(\"scroll\", onScroll);\n    }\n  }, [location]);\n\n\n  const NavLink = ({id, icon, title}) => {\n\n    let is_id = (current === id)? true : false;\n\n    let is_zoom = ['zoom-in','zoom-out'].includes(id);\n\n    if(expand === true && current!==null && !is_id && !is_zoom){\n      return null;\n    }\n    \n    return (\n      <div id={id} className={\"nav_link\"+(is_id?' active':'')}>\n        <i className={`bx ${icon} nav_icon`} onClick={()=>is_zoom?onZoom(id):onHref(id)}></i>\n        <div className=\"nav_name\" onClick={()=>is_zoom?onZoom(id):onHref(id)}>{title}</div>\n        {!is_zoom?<i title=\"Cerrar\" className={is_id?`bx bx-x nav_link_close`:''} onClick={()=>onCurrent(null)}></i>:null}\n      </div>\n    );\n  }\n\n  return(\n    <div className=\"snippet-body\" id=\"body-pd\">\n      <header className=\"header\" id=\"header\">\n          <div className=\"header_img\">\n            <User />\n          </div>\n          <div className=\"header_toggle\">\n            <i className=\"bx bx-menu\" id=\"header-toggle\" onClick={onExpand}></i>\n          </div>\n      </header>\n      <div className=\"l-navbar\" id=\"nav-bar\">\n          <nav className=\"nav\">\n              <div className=\"flex\"> \n                <Title onClick={()=>onExpand()} />\n                <div className=\"nav_list\">\n                  <NavLink id=\"thumbnails\" icon=\"bx-grid\" title=\"Miniaturas\" />\n                  <NavLink id=\"books\" icon=\"bx-menu\" title=\"Tabla de Contenidos\" />\n                  <NavLink id=\"annotator\" icon=\"bx-book\" title=\"Anotador\" />\n                  <NavLink id=\"content\" icon=\"bx-search\" title=\"Busqueda\" />\n                  <NavLink id=\"zoom-in\" icon=\"bx-zoom-in\" title=\"Ampliar\" />\n                  <NavLink id=\"zoom-out\" icon=\"bx-zoom-out\" title=\"Minimizar\" />\n                </div>\n                <Switch current={current} book={book}  query={query}/>\n              </div> \n          </nav>\n      </div>\n      <div id=\"main-content\" className=\"height-100 bg-light\" onClick={()=>onHide(true)}>\n        <div className=\"books-content\" ref={refScroll}>\n          {books.map((item, key )=><img key={key} src={item.url} alt=\"\" loading=\"lazy\" width={zoom+\"%\"} />)}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nconst Switch = ({current, book, query}) =>{\n  switch (current) {\n    case 'content':   \n      return <Content book={book} query={query}/>;\n    case 'books':   \n      return <Books query={query}/>;\n    default:\n      return null;\n  }\n}\n\n\n/**\n* NOT Hooks useCallback, asi da mas performance en memoria\n*/\nfunction getDatauseCallback(callback, location){\n\n  let data = state.books;\n\n  //replace url con datos actuales\n  let _url = state.api_url\n    .replace('{{book}}', state.book)\n    .replace('{{page}}', location);\n  \n  if(data.indexOf(_url)===-1){\n    //Temporal [] hasta definir el uso de scroll\n    data = [];\n    data.push({\n      page:location,\n      url:_url\n    });\n    state.books = data;\n  }\n  callback(new Date());\n};","import React from \"react\";\nimport { Router as ReactRouter, Route, BrowserRouter, Switch, Redirect, useLocation } from \"react-router-dom\";\nimport { createBrowserHistory } from \"history\";\n\nimport BookReader from './components/BookReader';\nimport { redux } from './services';\n\nfunction Layout(props) {\n\n  const useQuery = () => new URLSearchParams(useLocation().search);\n  const query = useQuery();\n  return(\n    <Switch>\n      <Route path=\"/reader/:book\" render={ prop => <BookReader {...prop} query={query} /> } />\n    </Switch>\n  )\n}\n\nfunction Router() {\n  \n  const history = createBrowserHistory();\n  //Load store de redux\n  redux.store({\n    //lo dejo como proceso inicial hasta tener el circuito de seleccinar un libro\n    book:{\n      slug:'eloquent-javascript',\n      name:'Eloquent JavaScript'\n    },\n    loader:false,\n    search:{}\n  });\n\n  return(\n    <ReactRouter history={history}>\n      <BrowserRouter>\n        <Switch>\n          <Redirect from=\"/\" exact to=\"/reader/eloquent-javascript?location=1\" /> \n          <Route path=\"/*\" render={ prop => <Layout {...prop} /> } />\n        </Switch>\n      </BrowserRouter>\n    </ReactRouter>\n  )\n}\n\nexport default Router;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Router from './Router';\n\n//import Bootstrap JS\nimport \"bootstrap\";\n\n//import Bootstrap CSS\nimport \"../node_modules/bootstrap/dist/css/bootstrap.min.css\";\n\n//import CSS main segun ENV\nif (process.env.REACT_APP_ENV!=='local') require('./assets/css/main.min.css');\nelse require('./assets/main.scss');\n\nReactDOM.render(\n  <React.StrictMode>\n    <Router />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}